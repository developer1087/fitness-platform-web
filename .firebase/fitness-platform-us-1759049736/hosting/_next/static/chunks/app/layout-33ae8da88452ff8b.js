(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2114:(e,i,t)=>{Promise.resolve().then(t.t.bind(t,3673,23)),Promise.resolve().then(t.bind(t,8576))},3673:()=>{},4585:(e,i,t)=>{"use strict";t.d(i,{IG:()=>f,db:()=>u,j2:()=>c});var r=t(2078),a=t(9253),s=t(9708),n=t(8134);let o={apiKey:"AIzaSyBv4edZFdKq5UieQchPC3SXjDtKXuUYsd0",authDomain:"fitness-platform-us-1759049736.firebaseapp.com",projectId:"fitness-platform-us-1759049736",storageBucket:"fitness-platform-us-1759049736.firebasestorage.app",messagingSenderId:"388593504795",appId:"1:388593504795:web:f0c3b2e60b3076d2cd9ebe",measurementId:"G-657169BEFM"},l=o.apiKey&&o.projectId?0===(0,r.Dk)().length?(0,r.Wp)(o):(0,r.Dk)()[0]:(console.warn("Firebase configuration missing, skipping initialization"),null),c=l?(0,a.xI)(l):null,u=l?(0,s.aU)(l):null,f=l?(0,n.c7)(l):null},7886:(e,i,t)=>{"use strict";t.d(i,{y:()=>n});var r=t(9253),a=t(9708),s=t(4585);let n={async signIn(e){if(!s.j2)throw Error("Firebase Auth not initialized");let{email:i,password:t}=e,a=await (0,r.x9)(s.j2,i,t);return await this.createUserObject(a.user)},async signInWithGoogle(){if(!s.j2)throw Error("Firebase Auth not initialized");let e=new r.HF,i=(await (0,r.df)(s.j2,e)).user;if(!await this.getUserProfile(i.uid)){let[e="",t=""]=(i.displayName||"").split(" ");await this.createUserProfile(i.uid,{firstName:e,lastName:t,preferences:{workoutReminders:!0,emailNotifications:!0,pushNotifications:!0,privacySettings:{profileVisibility:"friends",workoutDataSharing:!1,progressSharing:!1}}})}return await this.createUserObject(i)},async signUp(e){if(!s.j2)throw Error("Firebase Auth not initialized");let{email:i,password:t,firstName:a,lastName:n}=e,o=(await (0,r.eJ)(s.j2,i,t)).user;return await (0,r.r7)(o,{displayName:"".concat(a," ").concat(n)}),await this.createUserProfile(o.uid,{firstName:a,lastName:n,preferences:{workoutReminders:!0,emailNotifications:!0,pushNotifications:!0,privacySettings:{profileVisibility:"friends",workoutDataSharing:!1,progressSharing:!1}}}),await this.createUserObject(o)},async signOut(){if(!s.j2)throw Error("Firebase Auth not initialized");await (0,r.CI)(s.j2)},async resetPassword(e){if(!s.j2)throw Error("Firebase Auth not initialized");await (0,r.J1)(s.j2,e)},async createUserProfile(e,i){if(!s.db)throw Error("Firebase Firestore not initialized");let t=(0,a.H9)(s.db,"users",e);await (0,a.BN)(t,{...i,role:"user",createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString()})},async updateUserProfile(e,i){if(!s.db)throw Error("Firebase Firestore not initialized");let t=(0,a.H9)(s.db,"users",e);await (0,a.mZ)(t,i)},async getUserProfile(e){if(!s.db)return null;let i=(0,a.H9)(s.db,"users",e),t=await (0,a.x7)(i);return t.exists()?t.data():null},async createUserObject(e){let i=await this.getUserProfile(e.uid);return{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,createdAt:e.metadata.creationTime||new Date().toISOString(),lastLoginAt:e.metadata.lastSignInTime||new Date().toISOString(),role:"user",profile:i||{firstName:"",lastName:"",preferences:{workoutReminders:!0,emailNotifications:!0,pushNotifications:!0,privacySettings:{profileVisibility:"friends",workoutDataSharing:!1,progressSharing:!1}}}}}}},8576:(e,i,t)=>{"use strict";t.d(i,{AuthProvider:()=>c,A:()=>u});var r=t(5155),a=t(2115),s=t(9253),n=t(4585),o=t(7886);let l=(0,a.createContext)(null);function c(e){let{children:i}=e,[t,c]=(0,a.useState)(null),[u,f]=(0,a.useState)(!0),[d,h]=(0,a.useState)(null);(0,a.useEffect)(()=>n.j2?(0,s.hg)(n.j2,async e=>{try{if(f(!0),h(null),e){let i=await o.y.createUserObject(e);c(i)}else c(null)}catch(e){h(e instanceof Error?e.message:"Authentication error"),c(null)}finally{f(!1)}}):void f(!1),[]);let w=async e=>{try{f(!0),h(null),await o.y.signIn(e),window.location.href="/"}catch(e){throw h(e instanceof Error?e.message:"Sign in failed"),e}finally{f(!1)}},g=async()=>{try{f(!0),h(null),await o.y.signInWithGoogle(),window.location.href="/"}catch(e){throw h(e instanceof Error?e.message:"Google sign in failed"),e}finally{f(!1)}},p=async e=>{try{f(!0),h(null),await o.y.signUp(e),window.location.href="/"}catch(e){throw h(e instanceof Error?e.message:"Sign up failed"),e}finally{f(!1)}},y=async()=>{try{f(!0),h(null),await o.y.signOut()}catch(e){throw h(e instanceof Error?e.message:"Sign out failed"),e}finally{f(!1)}},m=async e=>{try{h(null),await o.y.resetPassword(e)}catch(e){throw h(e instanceof Error?e.message:"Password reset failed"),e}};return(0,r.jsx)(l.Provider,{value:{user:t,loading:u,error:d,signIn:w,signInWithGoogle:g,signUp:p,signOut:y,resetPassword:m,clearError:()=>{h(null)}},children:i})}function u(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[978,992,416,914,441,493,358],()=>e(e.s=2114)),_N_E=e.O()}]);