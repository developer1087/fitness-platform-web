(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{937:(e,t,a)=>{"use strict";a.d(t,{O5:()=>r.O5,X5:()=>r.X5,b6:()=>r.b6});var r=a(9399)},4789:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(5155),s=a(2115),i=a(8576),n=a(1914),l=a(937);let o=[{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"}],d=["Weight Loss","Muscle Gain","General Fitness","Strength Training","Endurance","Athletic Performance","Flexibility","Balance","Rehabilitation","Sport-Specific Training"];function c(e){let{isOpen:t,onClose:a,onSubmit:i}=e,[n,c]=(0,s.useState)({firstName:"",lastName:"",email:"",fitnessLevel:"beginner",goals:[],notes:""}),[m,u]=(0,s.useState)({}),[h,x]=(0,s.useState)(!1),g=(e,t)=>{c(a=>({...a,[e]:t})),m[e]&&u(t=>({...t,[e]:""}))},p=async e=>{if(e.preventDefault(),(()=>{try{return l.b6.parse(n),u({}),!0}catch(e){if(e instanceof Error){let t=JSON.parse(e.message),a={};t.forEach(e=>{a[e.path[0]]=e.message}),u(a)}return!1}})()){x(!0);try{await i(n),c({firstName:"",lastName:"",email:"",fitnessLevel:"beginner",goals:[],notes:""}),a()}catch(e){console.error("Error submitting form:",e)}finally{x(!1)}}};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("form",{onSubmit:p,children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Trainee"}),(0,r.jsx)("button",{type:"button",onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Basic Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,r.jsx)("input",{type:"text",id:"firstName",value:n.firstName,onChange:e=>g("firstName",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(m.firstName?"border-red-500":"border-gray-300"),placeholder:"Enter first name"}),m.firstName&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.firstName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,r.jsx)("input",{type:"text",id:"lastName",value:n.lastName,onChange:e=>g("lastName",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(m.lastName?"border-red-500":"border-gray-300"),placeholder:"Enter last name"}),m.lastName&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.lastName})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),(0,r.jsx)("input",{type:"email",id:"email",value:n.email,onChange:e=>g("email",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(m.email?"border-red-500":"border-gray-300"),placeholder:"trainee@example.com"}),m.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.email})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Fitness Information"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"fitnessLevel",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fitness Level"}),(0,r.jsx)("select",{id:"fitnessLevel",value:n.fitnessLevel||"beginner",onChange:e=>g("fitnessLevel",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Fitness Goals"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:d.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>(e=>{let t=n.goals||[];g("goals",t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),className:"px-3 py-2 text-sm rounded-md border transition-colors ".concat((n.goals||[]).includes(e)?"bg-blue-100 border-blue-300 text-blue-800":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"),children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),(0,r.jsx)("textarea",{id:"notes",value:n.notes||"",onChange:e=>g("notes",e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(m.notes?"border-red-500":"border-gray-300"),placeholder:"Any additional information about the trainee..."}),m.notes&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.notes})]})]})]}),(0,r.jsxs)("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:a,disabled:h,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding Trainee..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Trainee"]})})]})]})})}):null}var m=a(5915);let u=[{id:"1",trainerId:"trainer-1",firstName:"Sarah",lastName:"Johnson",email:"sarah.johnson@email.com",phone:"+1 (555) 123-4567",joinDate:"2024-08-15",status:"active",fitnessLevel:"beginner",goals:["Weight Loss","General Fitness"],lastSession:"2024-09-20",totalSessions:12,profilePicture:"https://images.unsplash.com/photo-1494790108755-2616b612b55c?w=150&h=150&fit=crop&crop=face"},{id:"2",trainerId:"trainer-1",firstName:"Mike",lastName:"Chen",email:"mike.chen@email.com",phone:"+1 (555) 987-6543",joinDate:"2024-07-22",status:"active",fitnessLevel:"intermediate",goals:["Muscle Gain","Strength Training"],lastSession:"2024-09-19",totalSessions:28,profilePicture:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face"},{id:"3",trainerId:"trainer-1",firstName:"Alex",lastName:"Rivera",email:"alex.rivera@email.com",phone:"+1 (555) 456-7890",joinDate:"2024-09-01",status:"trial",fitnessLevel:"advanced",goals:["Athletic Performance","Endurance"],lastSession:"2024-09-18",totalSessions:6,profilePicture:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face"},{id:"4",trainerId:"trainer-1",firstName:"Emma",lastName:"Wilson",email:"emma.wilson@email.com",joinDate:"2024-06-10",status:"inactive",fitnessLevel:"beginner",goals:["Weight Loss","Flexibility"],lastSession:"2024-08-30",totalSessions:15}];function h(){let{user:e}=(0,i.A)(),[t,a]=(0,s.useState)([]),[l,o]=(0,s.useState)(!0),[d,h]=(0,s.useState)(""),[x,g]=(0,s.useState)("all"),[p,f]=(0,s.useState)(!1),[b,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{(null==e?void 0:e.uid)&&j()},[e]);let j=async()=>{if(null==e?void 0:e.uid){o(!0),v(null);try{let t=await m.g.getTraineesByTrainer(e.uid);a(t)}catch(e){console.error("Error loading trainees:",e),v("Failed to load trainees. Please try again."),a(u)}finally{o(!1)}}},y=async t=>{if(null==e?void 0:e.uid)try{await m.g.inviteTrainee(e.uid,t),await j()}catch(e){throw console.error("Error adding trainee:",e),Error(e.message||"Failed to add trainee")}},w=async e=>{try{if(!window.confirm("Delete this trainee? This action cannot be undone."))return;await m.g.deleteTrainee(e),await j()}catch(e){console.error("Error deleting trainee:",e),v("Failed to delete trainee. Please try again.")}};if(!e)return(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})});let N=t.filter(e=>{let t="".concat(e.firstName," ").concat(e.lastName," ").concat(e.email).toLowerCase().includes(d.toLowerCase()),a="all"===x||e.status===x;return t&&a});return(0,r.jsxs)(n.A,{currentPage:"trainees",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Trainees"}),(0,r.jsxs)("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Trainee"]})]})})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("input",{type:"text",placeholder:"Search trainees...",value:d,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"trial",children:"Trial"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]})})]})}),b&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),b]})}),l?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading trainees..."})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full overflow-hidden mr-4",children:e.profilePicture?(0,r.jsx)("img",{src:e.profilePicture,alt:"".concat(e.firstName," ").concat(e.lastName),className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e.firstName," ",e.lastName]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Status:"}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{let t={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",trial:"bg-blue-100 text-blue-800",pending:"bg-yellow-100 text-yellow-800"};return t[e]||t.inactive})(e.status)),children:e.status})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Level:"}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{let t={beginner:"bg-yellow-100 text-yellow-800",intermediate:"bg-orange-100 text-orange-800",advanced:"bg-red-100 text-red-800"};return t[e]||t.beginner})(e.fitnessLevel)),children:e.fitnessLevel})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Sessions:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.totalSessions})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Last Session:"}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.lastSession?new Date(e.lastSession).toLocaleDateString():"Never"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Goals:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.goals.map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e},t))})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4 pt-4 border-t",children:[(0,r.jsx)("a",{href:"/trainees/".concat(e.id),className:"flex-1 bg-blue-50 text-blue-700 px-3 py-2 rounded-md hover:bg-blue-100 transition-colors text-sm font-medium text-center",children:"View Profile"}),(0,r.jsx)("button",{className:"flex-1 bg-green-50 text-green-700 px-3 py-2 rounded-md hover:bg-green-100 transition-colors text-sm font-medium",children:"Schedule"}),(0,r.jsx)("button",{onClick:()=>w(e.id),className:"px-3 py-2 bg-red-50 text-red-700 rounded-md hover:bg-red-100 transition-colors text-sm font-medium","aria-label":"Delete trainee",children:"Delete"}),(0,r.jsx)("button",{className:"px-3 py-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})]})},e.id))}),0===N.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5 0a3 3 0 003-3V12a3 3 0 00-3-3h-4.5z"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No trainees found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:d||"all"!==x?"Try adjusting your search or filter criteria.":"Get started by adding your first trainee."})]})]})]}),(0,r.jsx)(c,{isOpen:p,onClose:()=>f(!1),onSubmit:y})]})}},5915:(e,t,a)=>{"use strict";a.d(t,{g:()=>o});var r=a(9708),s=a(4585);let i="trainee_invitations",n="trainees";function l(){let e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}class o{static async inviteTrainee(e,t){try{if(!s.db)throw Error("Firebase Firestore not initialized");let o=(0,r.P)((0,r.rJ)(s.db,n),(0,r._M)("trainerId","==",e),(0,r._M)("email","==",t.email));if(!(await (0,r.GG)(o)).empty)throw Error("A trainee with this email already exists");let d=(0,r.P)((0,r.rJ)(s.db,i),(0,r._M)("trainerId","==",e),(0,r._M)("email","==",t.email),(0,r._M)("status","==","pending"));if(!(await (0,r.GG)(d)).empty)throw Error("An invitation is already pending for this email");let c=l(),m=new Date,u=new Date(m.getTime()+6048e5),h={trainerId:e,email:t.email,firstName:t.firstName,lastName:t.lastName,fitnessLevel:t.fitnessLevel,goals:t.goals||[],notes:t.notes,status:"pending",inviteToken:c,invitedAt:m.toISOString(),expiresAt:u.toISOString()},x=await (0,r.gS)((0,r.rJ)(s.db,i),h),g={trainerId:e,email:t.email,firstName:t.firstName,lastName:t.lastName,joinDate:m.toISOString(),status:"pending",fitnessLevel:t.fitnessLevel||"beginner",goals:t.goals||[],notes:t.notes,totalSessions:0,invitationId:x.id};await (0,r.gS)((0,r.rJ)(s.db,n),g);try{var a;let e=(null===s.j2||void 0===s.j2||null==(a=s.j2.currentUser)?void 0:a.displayName)||"Your Trainer";fetch("/api/email/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({traineeEmail:t.email,trainerName:e,traineeFirstName:t.firstName,invitationToken:c})}).then(async e=>{if(!e.ok){let t=await e.text();console.warn("Invitation email API responded with non-OK:",t)}}).catch(e=>{console.warn("Invitation email API call failed:",e)})}catch(e){console.error("Error initiating invitation email:",e)}return x.id}catch(e){throw console.error("Error inviting trainee:",e),e}}static async getTraineesByTrainer(e){try{if(!s.db)throw Error("Firebase Firestore not initialized");let t=(0,r.P)((0,r.rJ)(s.db,n),(0,r._M)("trainerId","==",e),(0,r.My)("joinDate","desc")),a=await (0,r.GG)(t),i=[];return a.forEach(e=>{i.push({id:e.id,...e.data()})}),i}catch(e){throw console.error("Error getting trainees:",e),e}}static async getTraineeById(e){try{if(!s.db)throw Error("Firebase Firestore not initialized");let t=(0,r.H9)(s.db,n,e),a=await (0,r.x7)(t);if(a.exists())return{id:a.id,...a.data()};return null}catch(e){throw console.error("Error getting trainee:",e),e}}static async updateTrainee(e,t){try{if(!s.db)throw Error("Firebase Firestore not initialized");let a=(0,r.H9)(s.db,n,e);await (0,r.mZ)(a,{...t,updatedAt:new Date().toISOString()})}catch(e){throw console.error("Error updating trainee:",e),e}}static async deleteTrainee(e){try{if(!s.db)throw Error("Firebase Firestore not initialized");let t=(0,r.H9)(s.db,n,e),a=await (0,r.x7)(t);if(!a.exists())return;{let e=a.data(),n=e.trainerId,l=e.email;if(await (0,r.kd)(t),n&&l){let e=(0,r.P)((0,r.rJ)(s.db,i),(0,r._M)("trainerId","==",n),(0,r._M)("email","==",l)),t=await (0,r.GG)(e),a=[];t.forEach(e=>{a.push((0,r.kd)(e.ref))}),a.length>0&&await Promise.all(a)}}}catch(e){throw console.error("Error deleting trainee:",e),e}}static async getInvitationByToken(e){try{if(!s.db)throw Error("Firebase Firestore not initialized");let t=(0,r.P)((0,r.rJ)(s.db,i),(0,r._M)("inviteToken","==",e),(0,r._M)("status","==","pending")),a=await (0,r.GG)(t);if(a.empty)return null;let n=a.docs[0],l={id:n.id,...n.data()};if(new Date(l.expiresAt)<new Date)return await this.expireInvitation(l.id),null;return l}catch(e){throw console.error("Error getting invitation by token:",e),e}}static async acceptInvitation(e,t){try{if(!s.db)throw Error("Firebase Firestore not initialized");let a=(0,r.H9)(s.db,i,e);await (0,r.mZ)(a,{status:"accepted",acceptedAt:new Date().toISOString()});let l=(0,r.P)((0,r.rJ)(s.db,n),(0,r._M)("invitationId","==",e)),o=await (0,r.GG)(l);if(!o.empty){let e=o.docs[0],a=(0,r.H9)(s.db,n,e.id);await (0,r.mZ)(a,{userId:t,status:"active",updatedAt:new Date().toISOString()})}}catch(e){throw console.error("Error accepting invitation:",e),e}}static async expireInvitation(e){try{if(!s.db)throw Error("Firebase Firestore not initialized");let t=(0,r.H9)(s.db,i,e);await (0,r.mZ)(t,{status:"expired"})}catch(e){throw console.error("Error expiring invitation:",e),e}}static async resendInvitation(e){try{if(!s.db)throw Error("Firebase Firestore not initialized");let t=l(),a=new Date(Date.now()+6048e5),n=(0,r.H9)(s.db,i,e);return await (0,r.mZ)(n,{inviteToken:t,status:"pending",expiresAt:a.toISOString(),resentAt:new Date().toISOString()}),t}catch(e){throw console.error("Error resending invitation:",e),e}}static async getPendingInvitations(e){try{if(!s.db)throw Error("Firebase Firestore not initialized");let t=(0,r.P)((0,r.rJ)(s.db,i),(0,r._M)("trainerId","==",e),(0,r._M)("status","==","pending"),(0,r.My)("invitedAt","desc")),a=await (0,r.GG)(t),n=[];return a.forEach(e=>{n.push({id:e.id,...e.data()})}),n}catch(e){throw console.error("Error getting pending invitations:",e),e}}}},6383:(e,t,a)=>{Promise.resolve().then(a.bind(a,4789))},9399:(e,t,a)=>{"use strict";a.d(t,{O5:()=>i,X5:()=>s,b6:()=>l,oW:()=>n});var r=a(1508);let s=r.Ikc({email:r.YjP().min(1,"Email is required").email("Please enter a valid email address"),password:r.YjP().min(1,"Password is required").min(6,"Password must be at least 6 characters")}),i=r.Ikc({firstName:r.YjP().min(1,"First name is required").min(2,"First name must be at least 2 characters").max(50,"First name must be less than 50 characters"),lastName:r.YjP().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").max(50,"Last name must be less than 50 characters"),email:r.YjP().min(1,"Email is required").email("Please enter a valid email address"),password:r.YjP().min(1,"Password is required").min(6,"Password must be at least 6 characters").max(100,"Password must be less than 100 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:r.YjP().min(1,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),n=r.Ikc({email:r.YjP().min(1,"Email is required").email("Please enter a valid email address")}),l=r.Ikc({firstName:r.YjP().min(1,"First name is required").min(2,"First name must be at least 2 characters").max(50,"First name must be less than 50 characters"),lastName:r.YjP().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").max(50,"Last name must be less than 50 characters"),email:r.YjP().min(1,"Email is required").email("Please enter a valid email address"),fitnessLevel:r.k5n(["beginner","intermediate","advanced"]).optional(),goals:r.YOg(r.YjP()).optional(),notes:r.YjP().max(500,"Notes must be less than 500 characters").optional()});r.Ikc({id:r.YjP(),trainerId:r.YjP(),email:r.YjP().email(),firstName:r.YjP(),lastName:r.YjP(),fitnessLevel:r.k5n(["beginner","intermediate","advanced"]).optional(),goals:r.YOg(r.YjP()).optional(),notes:r.YjP().optional(),status:r.k5n(["pending","accepted","expired"]),inviteToken:r.YjP(),invitedAt:r.YjP(),acceptedAt:r.YjP().optional(),expiresAt:r.YjP()}),r.Ikc({id:r.YjP(),userId:r.YjP().optional(),trainerId:r.YjP(),firstName:r.YjP(),lastName:r.YjP(),email:r.YjP().email(),phone:r.YjP().optional(),profilePicture:r.YjP().optional(),joinDate:r.YjP(),status:r.k5n(["pending","active","inactive","trial"]),fitnessLevel:r.k5n(["beginner","intermediate","advanced"]),goals:r.YOg(r.YjP()),notes:r.YjP().optional(),lastSession:r.YjP().optional(),totalSessions:r.aig().min(0),invitationId:r.YjP().optional()})}},e=>{e.O(0,[992,416,914,508,533,441,493,358],()=>e(e.s=6383)),_N_E=e.O()}]);